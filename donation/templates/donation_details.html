{% extends 'base.html' %}
{% block content %}
<html>
  <head>
    <title>DonaWaste - Donation Details</title>
    <!-- Include Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>

    <div class="container mt-4">
        <h2 class="mb-4">Donation Details</h2>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">{{donation.title}}</h5>
                <img src="{{donation.image_url}}">
                <div id="map" style="width:100%; height:400px;"></div>
                <p class="card-text">
                    <strong>Donator:</strong> {{donation.donator.username}}<br>
                    <strong>Status:</strong> 
                    {% if donation.status == True %}
                        <span class="badge badge-success">Open</span>
                    {% else %}
                        <span class="badge badge-danger">Closed</span>
                    {% endif %}
                    <br>
                    <strong>Category:</strong> {{donation.category.name}}<br>
                    <strong>Date and Time Created:</strong> {{donation.datetime_created}}<br>
                    <strong>Weight (grams):</strong> {{donation.weight_grams}}<br>
                    <strong>Address:</strong> {{donation.address}}<br>
                    <strong>Description:</strong>
                    {% if donation.description %}
                        {{donation.description}}
                    {% else %}
                        <em>There is no description for this donation.</em>
                    {% endif %}
                </p>
            </div>
        </div>

        {% if donation.donator == logged_user %}
        <div class="text-center my-4">
            <a href="{% url 'donation:edit_existing_donation' donation.pk %}" class="btn btn-primary">Edit Donation</a>
            <a href="" class="btn btn-danger">Close Donation</a>
        </div>
        {% endif %}
    </div>

    <script>
        function myMap() {
          var map = new google.maps.Map(document.getElementById("map"), {
            center: new google.maps.LatLng("{{donation.latitude}}", "{{donation.longitude}}"),
            zoom: 18,
          });
          var marker = new google.maps.Marker({
            position: {lat: Number("{{donation.latitude}}"), lng: Number("{{donation.longitude}}")}
          });
          marker.setMap(map);
        }
      </script>
        
      <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDR71Bdem7SpTRwVK1YBa3tNsBGDPkWTUg&callback=myMap"></script>

    <!-- Include Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </body>
{% endblock content %}
</html>
